# 스마트 차수막 시스템 (Smart Floodgate System)

![스마트 차수막 시연](docs/images/smart_floodgate_demo.gif)

STM32 기반으로 집중호우 시 자동으로 차수막을 올려 침수 피해를 줄이는 스마트 차수막 시스템입니다.  
수위 센서를 통해 빗물 양을 감지하고, 위험 단계에 따라 LCD 표시, LED/부저 경고, 서보모터로 차수막 개폐를 자동 제어합니다. 또한 IR 리모컨으로 수동/자동 모드 전환과 비상 제어도 가능합니다.

## 주요 기능

- **수위 감지 & 자동 제어**
  - 아날로그 수위 센서를 ADC로 읽어서 이동 평균 필터로 노이즈 제거
  - 강수량(mm)에 따라 `NORMAL / WARNING / FLOOD` 단계 구분 후 서보모터로 차수막 자동 상승/하강
- **상태 표시 & 경고**
  - LCD1602: 1줄은 강수량, 2줄은 현재 상태(예: NORMAL, WARNING, FLOOD) 표시
  - LED: 초록(정상), 노랑(주의), 빨강(위험)으로 시각적 경고
  - 부저: 위험 단계에서 경보음 출력
- **IR 리모컨 수동 제어**
  - NEC 프로토콜 기반 IR 리시브 센서로 리모컨 신호 디코딩
  - 버튼별로 차수막 상승/하강/정지, 자동↔수동 모드 전환, 비상 정지 등 매핑
- **안전 & 확장성**
  - 서보 각도·펄스폭 계산으로 안정적인 동작, 과도한 반복 제어 방지
  - 향후 WiFi/BLE 연동, 스마트폰 앱, 고정밀 수위 센서, ML 기반 예측 등 확장 가능

## 사용 부품

- STM32 마이크로컨트롤러
- 수위 센서 + 가변저항
- LCD1602 (I2C)
- 서보모터, 부저, RGB/다색 LED
- IR 리시브 센서 + 리모컨
